# redis 应用问题

> 缓存穿透
>
> 发生条件：
>
> 1. 应用服务器压力变大
> 2. redis 命中率降低
> 3. 一直查询数据库，使得数据库压力太大而压垮
>
> ![](C:\Users\10757\Desktop\redis-learn\img\缓存穿透.png)
>
> 某个key找不到数据源，每次针对此 key 的请求从缓存获取不到，请求都会压到数据源（数据库），从而可能压垮数据源。
>
> 
>
> 解决方案
>
> - 对空值缓存：如果一个查询返回的数据为空（不管是数据是否不存在），我们仍然把这个空结果（null）进行缓存，设置空结果的过期时间会很短，最长不超过五分钟。
>
> - 设置可访问的名单（白名单）：使用 bitmaps 类型定义一个可以访问的名单，名单 id 作为 bitmaps 的偏移量，每次访问和 bitmap 里面的 id 进行比较，如果访问 id 不在 bitmaps 里面，进行拦截，不允许访问。
>
> - 采用布隆过滤器：布隆过滤器（Bloom Filter）是 1970 年由布隆提出的。它实际上是一个很长的二进制向量 (位图) 和一系列随机映射函数（哈希函数）。布隆过滤器可以用于检索一个元素是否在一个集合中。它的优点是空间效率和查询时间都远远超过一般的算法，缺点是有一定的误识别率和删除困难。
>
> - 进行实时监控：当发现 Redis 的命中率开始急速降低，需要排查访问对象和访问的数据，和运维人员配合，可以设置黑名单限制服务。



> 缓存击穿
>
> 1. 数据库访问压力瞬时增加
> 2. redis里面没有出现大量key过期
> 3. redis正常运行
>
> ![](C:\Users\10757\Desktop\redis-learn\img\缓存击穿.png)
>
> 
>
> key 对应的数据存在，但在 redis 中过期，此时若有大量并发请求过来，这些请求发现缓存过期一般都会从后端数据库加载数据并回设到缓存，这个时候大并发的请求可能会瞬间把后端数据库压垮。
>
>
> 



> 缓存雪崩



> 分布式锁



















