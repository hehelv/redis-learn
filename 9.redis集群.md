# redis集群

## 无中心化集群

> 集群：实现了水平扩容。
>
> 水平扩容：即开启N个节点，每个节点存储1/N的数据。



> 无中心化集群：
>
> - 之前是使用代理主机方式
> - 现在使用无中心化集群：每台redis服务器都可以作为代理主机。



> 集群搭建：
>
> 1. 删除持久化文件。
> 2. 修改配置文件。
> 3. 开启所有结点。
> 4. 连接集群。



> 连接集群主机：
>
> ```redis
> redis-cli-c -p 6379	//可以自动重定向
> ```
>
> 普通方式连接会出现MOVED重定向。



> redis_cluster如何分配六个节点？
>
> - 一个集群至少有三个主节点
> - 选项--cluster-replicas 1 :表示我们希望为集群的每个主节点创建一个从节点



> 什么是slots？
>
> 一个redis集群有16384个插槽（hash slot），数据库中每个键都属于这16384个插槽的其中一个，集群使用公式CRC16(KEY)%16384来计算键key属于哪个slot。
>
> 集群中的每个节点负责处理一部分插槽，举个例子：
>
> - 节点A负责处理0到5460号slot
> - 节点B负责处理5461到10922号slot
> - 节点C负责处理10923到16383号slot











































